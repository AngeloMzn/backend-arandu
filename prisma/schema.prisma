generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int   @unique  @id @default(autoincrement())
  email     String   @unique
  name      String?
  role      String   @default("user")
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Edition {
  id                    Int    @unique @id @default(autoincrement())
  name                  String
  year                  Int @unique
  registrationStart     DateTime
  registrationEnd       DateTime
  fixesStart            DateTime
  fixesEnd              DateTime
  onlineEvaluationStart DateTime
  onlineEvaluationEnd   DateTime
  liveEvaluationStart   DateTime
  liveEvaluationEnd     DateTime
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  EditionWeight          EditionWeight[]
  EditionEvaluationCount EditionEvaluationCount[]
}

model EditionWeight {
  id     Int @unique @id @default(autoincrement())
  edition Edition @relation(fields: [editionId], references: [id])
  liveComitteeEvaluationWeight   Int
  liveCommomEvaluationWeight     Int
  onlineComitteeEvaluationWeight Int
  onlineCommomEvaluationWeight   Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  editionId Int @unique
}

model EditionEvaluationCount {
  id                    Int      @unique @id @default(autoincrement())
  minimumOnlineComitteeEvaluation Int
  minimumOnlineCommomEvaluation   Int
  minimumLiveComitteeEvaluation   Int
  minimumLiveCommomEvaluation     Int
  maximumOnlineComitteeEvaluation Int
  maximumOnlineCommomEvaluation   Int
  maximumLiveComitteeEvaluation   Int
  maximumLiveCommomEvaluation     Int
  editionId                       Int  @unique
  createdAt                       DateTime @default(now())
  updatedAt                       DateTime @updatedAt

  edition Edition @relation(fields: [editionId], references: [id])
}
